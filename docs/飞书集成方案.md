# GEO工具 - 飞书深度集成方案（国内优先）
*让飞书成为GEO项目管理的核心平台*

---

## 🎯 为什么选择飞书而非Notion？

### 国内客户痛点
| 问题 | Notion | 飞书 |
|------|--------|------|
| **访问速度** | ❌ 需要翻墙，经常卡顿 | ✅ 国内服务器，秒开 |
| **团队协作** | ⚠️ 需要单独账号体系 | ✅ 企业统一账号 |
| **消息通知** | ❌ 邮件通知，易遗漏 | ✅ 即时消息，必达 |
| **文件存储** | ⚠️ 上传慢 | ✅ 云文档，快速同步 |
| **移动端** | ⚠️ 体验一般 | ✅ App体验优秀 |
| **客户习惯** | ❌ 学习成本高 | ✅ 大部分企业在用 |
| **价格** | 💰 团队版 $8/人/月 | ✅ 免费版够用 |

### 飞书的独特优势
1. **全家桶整合**：IM + 文档 + 表格 + 日历 + 审批 一体化
2. **即时通讯**：项目进度实时推送到群聊
3. **企业通讯录**：自动管理团队和客户权限
4. **多维表格**：功能强大，类似Airtable
5. **机器人生态**：丰富的机器人和webhook
6. **移动办公**：手机端体验极佳

---

## 🚀 飞书深度集成方案（5大模块）

### 模块1：飞书多维表格 - 项目管理中枢 📊

**替代Notion Database**

#### 1.1 客户信息表
```
字段设计：
- 客户名称 [单行文本]
- 行业类型 [单选：医美/护肤/器械/其他]
- 联系人 [人员]
- 项目状态 [单选：待启动/进行中/已完成/暂停]
- 合同金额 [数字]
- 开始日期 [日期]
- 预计完成 [日期]
- 项目组 [多选人员]
- 飞书群聊 [链接]
- 备注 [多行文本]
```

#### 1.2 项目执行表
```
字段设计：
- 项目ID [自动编号]
- 客户名称 [关联：客户信息表]
- 执行阶段 [单选：D矩阵/B转化/C质检/A提案]
- 执行状态 [单选：待执行/执行中/已完成/失败]
- 负责人 [人员]
- 开始时间 [日期时间]
- 完成时间 [日期时间]
- 耗时(分钟) [公式：完成时间-开始时间]
- 结果文件 [附件]
- 质量评分 [评分：1-5星]
- 备注 [多行文本]
```

#### 1.3 压力测试记录表
```
字段设计：
- 测试ID [自动编号]
- 项目名称 [关联：项目执行表]
- 测试时间 [日期时间]
- 测试引擎 [多选：DeepSeek/ChatGPT/Kimi/通义]
- 关键词数量 [数字]
- 平均得分 [数字]
- 提及率 [百分比]
- 趋势 [单选：上升↑/持平→/下降↓]
- 详细报告 [附件]
```

#### 1.4 客户反馈表
```
字段设计：
- 反馈时间 [日期时间]
- 客户名称 [关联：客户信息表]
- 反馈类型 [单选：满意/建议/投诉]
- 反馈内容 [多行文本]
- 处理状态 [单选：待处理/处理中/已解决]
- 处理人 [人员]
- 回复内容 [多行文本]
```

**技术实现：**
```python
# 新增文件：scripts/feishu_bitable.py
class FeishuBitable:
    def __init__(self, app_id, app_secret):
        """飞书多维表格管理器"""

    def create_client_record(self, client_data):
        """创建客户记录"""

    def update_project_status(self, project_id, status):
        """更新项目状态"""

    def upload_results(self, project_id, files):
        """上传结果文件到表格附件"""

    def add_pressure_test_record(self, test_data):
        """记录压力测试结果"""

    def get_client_projects(self, client_id):
        """获取客户的所有项目"""

    def generate_project_report(self, project_id):
        """从表格数据生成项目报告"""
```

---

### 模块2：飞书文档 - 结果展示与分享 📝

**替代Notion Page**

#### 2.1 自动生成项目文档
- **标题**：「客户名称」GEO项目交付文档
- **目录结构**：
  ```
  📋 项目概览
  📊 执行摘要
  🎯 D - 矩阵提取结果
  🔄 B - 转化路径设计
  ✅ C - 质检改进方案
  💼 A - 商业提案
  📈 压力测试报告
  📊 数据可视化
  📎 附件下载
  ```

#### 2.2 权限管理
- **内部文档**：仅团队可见
- **客户文档**：客户可查看，不可编辑
- **公开文档**：生成分享链接

#### 2.3 协作功能
- **@提醒**：在文档中直接@团队成员
- **评论功能**：客户可评论反馈
- **版本历史**：自动保存所有修改

**技术实现：**
```python
# 新增文件：scripts/feishu_docs.py
class FeishuDocs:
    def create_project_doc(self, client_name, results):
        """创建项目交付文档"""

    def insert_markdown_content(self, doc_id, markdown):
        """插入Markdown内容到文档"""

    def add_table_of_contents(self, doc_id):
        """添加目录"""

    def set_document_permission(self, doc_id, user_ids, permission='view'):
        """设置文档权限"""

    def generate_share_link(self, doc_id):
        """生成分享链接"""

    def add_comment(self, doc_id, text, user_id):
        """添加评论"""
```

---

### 模块3：飞书机器人 - 智能助手 🤖

**实时通知 + 智能交互**

#### 3.1 项目进度机器人
**功能：**
- 项目启动时自动创建群聊
- 实时推送执行进度
- 阶段完成自动@客户
- 异常情况立即告警

**消息格式：**
```
📢 【项目进度更新】

🏢 客户：悦白之几
📋 项目：GEO优化
⏱️ 当前阶段：D - 矩阵提取 ✅ 已完成

📊 执行摘要：
- 耗时：5分32秒
- 提取硬核实体词：10个
- 原创语义标签：10个
- 预测热门提问：10个

🎯 下一步：B - 转化路径设计

👉 [查看详细结果](飞书文档链接)
```

#### 3.2 智能问答机器人
**支持命令：**
- `/项目列表` - 查看所有项目
- `/项目进度 [客户名]` - 查看特定项目
- `/压力测试 [客户名]` - 查看最新测试结果
- `/数据报告 [客户名] [月份]` - 生成月度报告
- `/帮助` - 查看所有命令

**交互式卡片：**
```
📊 项目：悦白之几

当前状态：进行中 🟢
完成度：75% ████████░░

阶段进度：
✅ D - 矩阵提取
✅ B - 转化路径
✅ C - 质检暴改
🔄 A - 商业提案（进行中）

[查看详情] [下载报告] [联系负责人]
```

#### 3.3 定时播报机器人
**每日播报（9:00）：**
- 昨日完成的项目
- 今日待处理任务
- 延期预警

**每周总结（周一9:00）：**
- 上周项目统计
- 本周计划
- 关键指标趋势

**技术实现：**
```python
# 增强现有：scripts/feishu_bot.py
class FeishuBot:
    def send_progress_update(self, group_id, project_data):
        """发送进度更新消息"""

    def send_interactive_card(self, group_id, card_data):
        """发送交互式卡片"""

    def handle_command(self, command, user_id):
        """处理机器人命令"""

    def send_daily_report(self, group_id):
        """发送每日播报"""

    def send_weekly_summary(self, group_id):
        """发送每周总结"""

    def send_alert(self, group_id, alert_type, message):
        """发送告警消息"""
```

---

### 模块4：飞书云文档 - 文件管理 📁

**替代本地文件存储**

#### 4.1 自动归档结构
```
GEO工具/
├── 客户档案/
│   ├── 悦白之几/
│   │   ├── 01_输入卡.json
│   │   ├── 02_D_矩阵提取.md
│   │   ├── 03_B_转化路径.md
│   │   ├── 04_C_质检暴改.md
│   │   ├── 05_A_商业提案.md
│   │   ├── 06_压力测试报告.md
│   │   └── 07_数据可视化/
│   └── 其他客户.../
├── 模板库/
│   ├── 输入卡模板.json
│   ├── PPT模板.pptx
│   └── 报告模板.md
└── 内部文档/
    ├── SOP手册.doc
    └── 培训资料.doc
```

#### 4.2 自动上传
- 流水线完成后自动上传所有结果
- 保留版本历史（Before/After对比）
- 支持在线预览（Markdown/JSON/图片）

**技术实现：**
```python
# 新增文件：scripts/feishu_drive.py
class FeishuDrive:
    def create_client_folder(self, client_name):
        """创建客户文件夹"""

    def upload_file(self, folder_id, file_path):
        """上传文件到飞书云文档"""

    def create_folder_structure(self, client_name):
        """创建标准文件夹结构"""

    def get_file_list(self, folder_id):
        """获取文件夹内文件列表"""

    def share_folder(self, folder_id, user_ids):
        """分享文件夹给客户"""
```

---

### 模块5：飞书审批流 - 项目管理 ✅

**标准化项目流程**

#### 5.1 项目启动审批
```
审批流程：
1. 销售提交【新建GEO项目】申请
   - 填写客户信息
   - 上传输入卡
   - 选择交付周期

2. 项目经理审批
   - 评估资源和排期
   - 分配项目组

3. 自动触发
   - 创建多维表格记录
   - 创建飞书群聊
   - 生成项目文档
   - 通知项目组
```

#### 5.2 项目变更审批
```
变更类型：
- 需求变更
- 延期申请
- 加急处理
- 额外服务
```

#### 5.3 项目验收审批
```
验收流程：
1. 项目组提交验收
2. 客户确认
3. 财务入账
4. 归档存储
```

**技术实现：**
```python
# 新增文件：scripts/feishu_approval.py
class FeishuApproval:
    def create_project_approval(self, client_data):
        """创建项目启动审批"""

    def check_approval_status(self, approval_id):
        """检查审批状态"""

    def on_approval_passed(self, approval_data):
        """审批通过后的自动化操作"""

    def create_change_approval(self, project_id, change_type):
        """创建变更审批"""
```

---

## 🔄 飞书 vs Notion 对比方案

### 方案A：纯飞书方案（推荐国内）
```
✅ 优势：
- 访问速度快，无需翻墙
- 客户接受度高，学习成本低
- 即时通讯，消息必达
- 移动端体验好
- 价格便宜（免费版够用）

⚠️ 劣势：
- 国际客户可能不熟悉
- API文档相对少
- 模板生态不如Notion丰富
```

### 方案B：飞书+Notion 双轨方案
```
国内客户 → 飞书
国际客户 → Notion

优势：
- 灵活适配不同客户
- 最大化客户体验

劣势：
- 维护成本双倍
- 需要两套集成代码
```

### 方案C：以飞书为主，Notion为辅
```
核心功能 → 飞书（多维表格、文档、机器人）
知识管理 → Notion（内部Wiki、模板库）

优势：
- 发挥两者优势
- 降低维护成本

推荐：✅ 这是我建议的方案
```

---

## 📅 飞书集成实施计划（3周）

### 第1周：飞书基础设施

**Day 1-2：多维表格设计**
- [ ] 设计4张核心表（客户/项目/测试/反馈）
- [ ] 创建表格模板
- [ ] 配置字段和权限
- [ ] 测试API连接

**Day 3-4：飞书API集成**
- [ ] 完善`feishu_bitable.py`
- [ ] 实现CRUD操作
- [ ] 测试数据同步

**Day 5-7：文档和云文档集成**
- [ ] 创建`feishu_docs.py`
- [ ] 创建`feishu_drive.py`
- [ ] 实现自动文档生成
- [ ] 实现文件自动归档

---

### 第2周：飞书机器人增强

**Day 1-3：进度通知机器人**
- [ ] 增强`feishu_bot.py`
- [ ] 实现进度推送
- [ ] 实现交互式卡片
- [ ] 测试消息发送

**Day 4-5：智能问答机器人**
- [ ] 实现命令解析
- [ ] 实现项目查询
- [ ] 实现报告生成
- [ ] 测试交互功能

**Day 6-7：定时播报**
- [ ] 实现每日播报
- [ ] 实现每周总结
- [ ] 集成到scheduler
- [ ] 测试定时任务

---

### 第3周：流程集成和测试

**Day 1-2：审批流集成**
- [ ] 创建`feishu_approval.py`
- [ ] 设计审批模板
- [ ] 实现自动触发
- [ ] 测试审批流程

**Day 3-4：完整流程打通**
- [ ] 在`app.py`集成飞书功能
- [ ] 项目创建自动同步飞书
- [ ] 执行进度实时推送
- [ ] 结果自动归档

**Day 5-7：测试和优化**
- [ ] 端到端测试
- [ ] 性能优化
- [ ] 错误处理
- [ ] 编写文档

---

## 💰 成本对比

| 项目 | Notion | 飞书 |
|------|--------|------|
| **基础版** | $8/人/月 | 免费 |
| **专业版** | $15/人/月 | 免费 |
| **企业版** | 定制报价 | ¥499/人/年 |
| **10人团队年成本** | $960-1800 | ¥0-4990 |

**飞书免费版足够用：**
- ✅ 100GB云存储
- ✅ 无限消息历史
- ✅ 视频会议（不限时长）
- ✅ 文档协作（不限数量）
- ✅ 多维表格（不限行数）
- ✅ 机器人和API

---

## 🎯 推荐方案

**针对你的情况，我建议：**

### 方案：以飞书为主，保留Notion接口

**飞书负责：**
- ✅ 客户项目管理（多维表格）
- ✅ 实时进度通知（机器人）
- ✅ 文件存储归档（云文档）
- ✅ 团队协作沟通（IM+文档）
- ✅ 客户门户（分享链接）

**Notion保留：**
- ⚠️ 内部知识库
- ⚠️ 国际客户（可选）

**理由：**
1. 国内客户占主流，飞书更符合习惯
2. 飞书全家桶降低切换成本
3. 即时通讯提升响应速度
4. 成本更低（免费版够用）
5. 移动办公体验更好

---

## 📝 下一步行动

**立即准备：**
1. 开通飞书企业账号
2. 创建应用获取App ID和Secret
3. 设计多维表格模板
4. 规划群聊和通讯录结构

**我可以帮你：**
1. 实现完整的飞书集成代码
2. 设计多维表格结构
3. 开发智能机器人
4. 编写飞书集成文档

---

**准备好用飞书了吗？我可以立即开始实现！** 🚀
